<!DOCTYPE html>
<html>
<meta http-equiv="cache-control" content="no-cache" />
<script src="https://cdn.jsdelivr.net/npm/vue@2"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.21/lodash.min.js"></script>

<body>
<div id="app" width="100%">
    <div v-if="loaded">
        <p><small> This list was autogenerated from <a href="https://www.mtmt.hu/">MTMT</a> on {{date}}. Generate your <a href="https://github.com/ferdinandyb/mtmt-publist">own</a> </small></p>
    <ol>
        <li v-for="a in orderedArticles">
            <span v-for="w in _.orderBy(a.Authors,'Index')">
                <b v-if="w.IsUser == true">{{w.FamilyName}}, {{w.GivenName[0]}}., </b>
                <span v-else>{{w.FamilyName}}, {{w.GivenName[0]}}., </span>
            </span>
            <i><a v-bind:href="a.Doi">{{a.Title}}</a>, </i>
            {{a.Journal}}
            ({{a.Year}})
        </li>
    </ol>
    </div>
    <div v-else>
    Generating up-to-date paperlist from MTMT, please wait.
    <div class="spinner"></div>
    </div>
</div>

<script>
var app = new Vue({
	el: '#app',
    data: {
    	articles : [],
        date: "",
        loaded: false
    },
    methods: {

    },
    computed: {
  		orderedArticles: function () {
    		return _.orderBy(this.articles, 'Year', 'desc')
  		}
	},
    mounted(){
    fetch ("https://etoservice.elte.hu/mtmt-publist/user?mtid=10028021").then(res => res.json()).then(
    json => {
        this.articles = json.Papers
        var date = new Date(json.Time * 1000);
        this.date = date.toLocaleString();
        this.loaded = true
    }
    )
    }
})
</script>
<style>

.spinner {
    border: 16px solid #f3f3f3;
    border-radius: 50%;
    border-top: 16px solid #000000;
    margin: 20px;
    width: 100px;
    height: 100px;
    position: relative;
    left: 50%;
    top: 50%;
    z-index: 1;
    -webkit-animation-name: spin;
    -webkit-animation-duration: 4000ms;
    -webkit-animation-iteration-count: infinite;
    -webkit-animation-timing-function: linear;
    -moz-animation-name: spin;
    -moz-animation-duration: 4000ms;
    -moz-animation-iteration-count: infinite;
    -moz-animation-timing-function: linear;
    -ms-animation-name: spin;
    -ms-animation-duration: 4000ms;
    -ms-animation-iteration-count: infinite;
    -ms-animation-timing-function: linear;

    animation-name: spin;
    animation-duration: 4000ms;
    animation-iteration-count: infinite;
    animation-timing-function: linear;
}
@-ms-keyframes spin {
    from { -ms-transform: rotate(0deg); }
    to { -ms-transform: rotate(360deg); }
}
@-moz-keyframes spin {
    from { -moz-transform: rotate(0deg); }
    to { -moz-transform: rotate(360deg); }
}
@-webkit-keyframes spin {
    from { -webkit-transform: rotate(0deg); }
    to { -webkit-transform: rotate(360deg); }
}
@keyframes spin {
    from {
        transform:rotate(0deg);
    }
    to {
        transform:rotate(360deg);
    }
}

</style>
</body>
</html>
